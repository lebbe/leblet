<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard Settings</title>
    <!-- Leaflet CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <!-- Leaflet Geocoder CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css"
    />
    <link rel="stylesheet" href="styles.css?v=1.0" />
  </head>
  <body class="settings-page">
    <div class="settings-container">
      <h1>Dashboard Settings</h1>

      <div class="error" id="error-message"></div>
      <div class="success" id="success-message"></div>

      <!-- Location Picker -->
      <div class="location-picker">
        <div class="location-inputs">
          <h2 style="margin-bottom: 8px; font-size: 18px">Location</h2>
          <div class="form-group">
            <label for="location-latitude">Latitude</label>
            <input
              type="number"
              id="location-latitude"
              placeholder="e.g., 60.10"
              step="0.01"
              min="-90"
              max="90"
            />
          </div>
          <div class="form-group">
            <label for="location-longitude">Longitude</label>
            <input
              type="number"
              id="location-longitude"
              placeholder="e.g., 9.58"
              step="0.01"
              min="-180"
              max="180"
            />
          </div>
          <div class="form-group">
            <label for="location-altitude">Altitude (m)</label>
            <input
              type="number"
              id="location-altitude"
              placeholder="Fetched automatically"
              disabled
            />
            <div class="info-text">Updated when location changes</div>
          </div>
        </div>
        <div id="map"></div>
      </div>

      <form id="settings-form">
        <div class="form-group">
          <label for="station-input">Board URL</label>
          <textarea
            id="station-input"
            name="station-input"
            placeholder="Enter the full board URL (e.g., https://tavla.entur.no/Nc8XrEWestrOqa1JaHSR)"
            rows="4"
            required
          ></textarea>
          <div class="info-text">Copy the URL from tavla.entur.no</div>
          <a href="https://tavla.entur.no" target="_blank" class="entur-link"
            >Open Entur â†’</a
          >
        </div>

        <div class="form-group">
          <label class="toggle-label">
            <input type="checkbox" id="news-toggle" checked />
            <span class="toggle-text">Vis nyheter (NRK)</span>
          </label>
        </div>

        <div class="form-group">
          <label class="toggle-label">
            <input type="checkbox" id="clock-toggle" checked />
            <span class="toggle-text">Vis klokke</span>
          </label>
        </div>

        <a href="#" id="generate-link" class="generate-link"
          >Generate Dashboard</a
        >
      </form>

      <div class="url-container" id="url-container">
        <div class="url-label">Generated Dashboard URL</div>
        <div class="url-display" id="generated-url"></div>
        <div class="button-group">
          <button type="button" class="copy-btn" id="copy-btn">
            Copy to Clipboard
          </button>
          <button type="button" id="open-btn">Open Dashboard</button>
        </div>
      </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <!-- Leaflet Geocoder JS -->
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>

    <script src="settings.js?v=1.1" defer></script>
  </body>
</html>
